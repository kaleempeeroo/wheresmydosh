{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Resources": {
    "RecordSetGroup": {
      "Type": "AWS::Route53::RecordSetGroup",
      "Properties": {
        "HostedZoneName": {
          "Ref": "HostedZoneName"
        },
        "RecordSets": [
          {
            "TTL": "3600",
            "Type": "CNAME",
            "ResourceRecords": [
              {
                "Ref": "Backend"
              }
            ],
            "Name": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "ComponentName"
                  },
                  {
                    "Ref": "Environment"
                  },
                  {
                    "Ref": "HostedZoneName"
                  }
                ]
              ]
            }
          }
        ]
      }
    }
  },
  "Parameters": {
    "Environment": {
      "AllowedPattern": "\\.(?:(?!live\\.)\\w+\\.)?",
      "Default": ".int.",
      "Type": "String",
      "Description": "Environment name with leading and trailing dots (e.g. '.int.', '.test.'). For your live component use '.' instead of '.live.'"
    },
    "ComponentName": {
	"Type": "String",
	"Default":"ugc-file-upload",
      "Description": "Your component name"
    },
    "HostedZoneName": {
	"AllowedPattern": ".*\\.",
	"Default":"api.bbci.co.uk.",
      "Type": "String",
      "Description": "Domain to use with trailing dot (e.g. 'api.bbci.co.uk.', 'api.bbc.co.uk.', 'api.bbc.com.', 'files.bbci.co.uk.' or 'tools.bbc.co.uk'.')"
    },
    "Backend": {
	"Type": "String",
	"Default":"ugc-file-upload.int.c7dff5ab13c48206.xhst.bbci.co.uk",
      "Description": "Backend hostname for your component (e.g. '[component-name].[env.]account-identifier.xhst.bbci.co.uk')"
    }
  }
}
